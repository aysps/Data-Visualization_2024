{
  "hash": "3b8a555ab7cb08d8e22c2189f203f1f4",
  "result": {
    "markdown": "---\ntitle: \"Uncertainty\"\ndate: \"2023-09-25\"\ndate_end: \"2023-09-29\"\n---\n\n\n\n::: {.cell layout-align=\"center\"}\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/iframe-resizer/3.5.16/iframeResizer.min.js\" type=\"text/javascript\"></script>\n:::\n\n\nThroughout this lesson, you'll use the built-in `mpg` dataset to make histograms, density plots, box plots, violin plots, and other graphics that show uncertainty. \n\nSorry if `mpg` is getting repetitive! For short interactive things like this, it's easier to use built-in and easy-to-load datasets like `mpg` and `gapminder` instead of loading CSV files, hence our constant reuse of the dataset. This is fairly normal tooâ€”the majority of examples in R help pages (and in peoples' blog posts) use things like `mpg` or `gapminder`, or even `iris`, which measures the lengths and widths of a bunch of iris flowers in the 1930s (fun fact! I don't like using `iris` because the data was originally used in an article in the *Annals of Eugenics* (ðŸ˜¬) in 1936, and the data was collected to advance eugenics, and [there's no good reason to use data like that in 2023](https://armchairecology.blog/iris-dataset/).) \n\nSo we work with cars instead of racist flower data.\n\nThe `mpg` dataset is available in R as soon as you load ggplot2 (or tidyverse). Yu don't have to run `read_csv()` or anythingâ€”it's just there in the background already.\n\nAs a reminder, here are the first few rows of the `mpg` dataset:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nhead(mpg)\n## # A tibble: 6 Ã— 11\n##   manufacturer model displ  year   cyl trans      drv     cty   hwy fl    class \n##   <chr>        <chr> <dbl> <int> <int> <chr>      <chr> <int> <int> <chr> <chr> \n## 1 audi         a4      1.8  1999     4 auto(l5)   f        18    29 p     compaâ€¦\n## 2 audi         a4      1.8  1999     4 manual(m5) f        21    29 p     compaâ€¦\n## 3 audi         a4      2    2008     4 manual(m6) f        20    31 p     compaâ€¦\n## 4 audi         a4      2    2008     4 auto(av)   f        21    30 p     compaâ€¦\n## 5 audi         a4      2.8  1999     6 auto(l5)   f        16    26 p     compaâ€¦\n## 6 audi         a4      2.8  1999     6 manual(m5) f        18    26 p     compaâ€¦\n```\n:::\n\n\n\n## Histograms\n\nWhen working with histograms, you *always* need to think about the bin width. Histograms calculate the counts of rows within specific ranges of data, and the shape of the histogram will change depending on how wide or narrow these ranges (or bins, or buckets) are.\n\n::: {.callout-important}\n### Your turn\n\nChange this code to add a specific bin width for city miles per gallon `cty` (hint: `binwidth`). Play around with different widths until you find one that represents the data well.\n\n:::\n\n\n::: {.cell layout-align=\"center\"}\n<iframe style=\"margin: 0px auto; min-width: 100%; overflow: hidden; height: 801px;\" id=\"learnr-06-lesson-uncertainty1\" class=\"interactive\" src=\"https://andrewheiss.shinyapps.io/datavizm20_06-uncertainty-1/\" scrolling=\"no\" frameborder=\"no\" onload='iFrameResize({}, \"#learnr-06-lesson-uncertainty1\")'></iframe>\n:::\n\n\nBy default, histograms are filled with a dark grey color and the bars have no borders. Additionally, R places the center of the bars at specific numbers: if you have a bin width of 5, for instance, a bar will show the range from 7.5 to 12.5 instead of 5-10 or 10-15.\n\n::: {.callout-important}\n### Your turn\n\nDo the following:\n\n1. Add a specific bin width\n2. Add a white border (hint: `color`)\n3. Fill with <span style=\"color: #E16462\">#E16462</span>\n4. Make it so the bars start at whole numbers like 10 or 20 (hint: `boundary`)\n\n:::\n\n\n::: {.cell layout-align=\"center\"}\n<iframe style=\"margin: 0px auto; min-width: 100%; overflow: hidden; height: 801px;\" id=\"learnr-06-lesson-uncertainty2\" class=\"interactive\" src=\"https://andrewheiss.shinyapps.io/datavizm20_06-uncertainty-2/\" scrolling=\"no\" frameborder=\"no\" onload='iFrameResize({}, \"#learnr-06-lesson-uncertainty2\")'></iframe>\n:::\n\n\nYou can add extra aesthetics to encode additional information about the distribution of variables across categories. \n\n::: {.callout-important}\n### Your turn\n\nMake a histogram of `cty` and fill by `drv` (drive: front, rear, and 4-wheel). Make sure you specify a good bin width.\n\n:::\n\n\n::: {.cell layout-align=\"center\"}\n<iframe style=\"margin: 0px auto; min-width: 100%; overflow: hidden; height: 801px;\" id=\"learnr-06-lesson-uncertainty3\" class=\"interactive\" src=\"https://andrewheiss.shinyapps.io/datavizm20_06-uncertainty-3/\" scrolling=\"no\" frameborder=\"no\" onload='iFrameResize({}, \"#learnr-06-lesson-uncertainty3\")'></iframe>\n:::\n\n\nThat's too much information! Instead of only filling, you can separate the data into multiple plots.\n\n::: {.callout-important}\n### Your turn\n\nMake a histogram of `cty` fill *and* facet by `drv`. Make sure you specify a good bin width. Make sure you specify a good bin width.\n\n:::\n\n\n::: {.cell layout-align=\"center\"}\n<iframe style=\"margin: 0px auto; min-width: 100%; overflow: hidden; height: 801px;\" id=\"learnr-06-lesson-uncertainty4\" class=\"interactive\" src=\"https://andrewheiss.shinyapps.io/datavizm20_06-uncertainty-4/\" scrolling=\"no\" frameborder=\"no\" onload='iFrameResize({}, \"#learnr-06-lesson-uncertainty4\")'></iframe>\n:::\n\n\n## Density plots\n\nWhen working with density plots *in this class* you don't need to worry too much about the calculus behind the scenes that creates the curves. But you can change those settings if you really want.\n\n::: {.callout-important}\n### Your turn\n\nDo the following:\n\n1. Fill this density plot with <span style=\"color: #E16462\">#E16462</span>\n2. Add a border (hint: `color`) using <span style=\"color: #9C3836\">#9C3836</span>, with linewidth = 1\n3. Change the bandwidth (hint: `bw`) to 0.5, then 1, then 10\n\n:::\n\n\n::: {.cell layout-align=\"center\"}\n<iframe style=\"margin: 0px auto; min-width: 100%; overflow: hidden; height: 801px;\" id=\"learnr-06-lesson-uncertainty5\" class=\"interactive\" src=\"https://andrewheiss.shinyapps.io/datavizm20_06-uncertainty-5/\" scrolling=\"no\" frameborder=\"no\" onload='iFrameResize({}, \"#learnr-06-lesson-uncertainty5\")'></iframe>\n:::\n\n\nLike histograms, you can map other variables onto the plot. It's often a good idea to make the curves semi-transparent so you can see the different distributions.\n\n::: {.callout-important}\n### Your turn\n\nDo the following:\n\n1. Fill this plot using the `drv` variable\n2. Make the density plots 50% transparent\n\n:::\n\n\n::: {.cell layout-align=\"center\"}\n<iframe style=\"margin: 0px auto; min-width: 100%; overflow: hidden; height: 801px;\" id=\"learnr-06-lesson-uncertainty6\" class=\"interactive\" src=\"https://andrewheiss.shinyapps.io/datavizm20_06-uncertainty-6/\" scrolling=\"no\" frameborder=\"no\" onload='iFrameResize({}, \"#learnr-06-lesson-uncertainty6\")'></iframe>\n:::\n\n\nEven with transparency, it's often difficult to interpret density plots like this. As an alternative, you can use the [{ggridges} package](https://cran.r-project.org/web/packages/ggridges/vignettes/introduction.html) to make ridge plots. Look at the [documentation and examples for {ggridges}](https://cran.r-project.org/web/packages/ggridges/vignettes/introduction.html) for lots of details about different plots you can make.\n\n::: {.callout-important}\n### Your turn\n\nConvert this plot into a ridge plot.\n\n:::\n\n\n::: {.cell layout-align=\"center\"}\n<iframe style=\"margin: 0px auto; min-width: 100%; overflow: hidden; height: 801px;\" id=\"learnr-06-lesson-uncertainty7\" class=\"interactive\" src=\"https://andrewheiss.shinyapps.io/datavizm20_06-uncertainty-7/\" scrolling=\"no\" frameborder=\"no\" onload='iFrameResize({}, \"#learnr-06-lesson-uncertainty7\")'></iframe>\n:::\n\n\n## Boxes, violins, and dots\n\nFinally, you can use things like boxplots and violin plots to show the distribution of variables, either by themselves or across categories.\n\nBox plots show the distribution of a variable by highlighting specific details, like the 25th, 50th (median) and 75th percentile, as well as the assumed minimum, assumed maximum, and outliers:\n\n![Anatomy of a boxplot](/slides/06-slides_files/figure-html/boxplot-explanation-1.png)\n\nWhen making boxplots with ggplot, you need to map the variable of interest to the `x` aesthetic (or `y` if you want a vertical boxplot), and you can optionally map a second categorical variable to the `y` aesthetic (or `x` if you want a vertical boxplot).\n\nYou can adjust the fill and color of the plot, and you can change what counts as outliers with the `coef` argument. By default outliers are any point that is beyond the 75th percentile + 1.5 Ã— the interquartile range (or below the 25th percentile + 1.5 Ã— IQR), but that's adjustable.\n\n::: {.callout-important}\n### Your turn\n\nDo the following:\n\n1. Fill the boxplot with <span style=\"color: #E6AD3C\">#E6AD3C</span>\n2. Color the boxplot with <span style=\"color: #5ABD51\">#5ABD51</span>\n3. Change the definition of outliers to be 5 times the IQR\n\n:::\n\n\n::: {.cell layout-align=\"center\"}\n<iframe style=\"margin: 0px auto; min-width: 100%; overflow: hidden; height: 801px;\" id=\"learnr-06-lesson-uncertainty8\" class=\"interactive\" src=\"https://andrewheiss.shinyapps.io/datavizm20_06-uncertainty-8/\" scrolling=\"no\" frameborder=\"no\" onload='iFrameResize({}, \"#learnr-06-lesson-uncertainty8\")'></iframe>\n:::\n\n\nYou can also use violin plots instead of boxplot, which show the mirrored density distribution. When doing this, it's often helpful to add other geoms like jittered points to show more of the data\n\n::: {.callout-important}\n### Your turn\n\nDo the following\n\n1. Change this boxplot to use violins instead\n2. Add jittered points with a jittering width of 0.1 and sized at 0.5\n\n:::\n\n\n::: {.cell layout-align=\"center\"}\n<iframe style=\"margin: 0px auto; min-width: 100%; overflow: hidden; height: 801px;\" id=\"learnr-06-lesson-uncertainty9\" class=\"interactive\" src=\"https://andrewheiss.shinyapps.io/datavizm20_06-uncertainty-9/\" scrolling=\"no\" frameborder=\"no\" onload='iFrameResize({}, \"#learnr-06-lesson-uncertainty9\")'></iframe>\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}