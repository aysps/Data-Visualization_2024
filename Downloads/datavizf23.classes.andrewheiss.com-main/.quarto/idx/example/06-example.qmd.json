{"title":"Uncertainty","markdown":{"yaml":{"title":"Uncertainty","date":"2023-09-25","date_end":"2023-09-29"},"headingText":"Live coding example","containsRefs":false,"markdown":"\n\nFor this example, we're going to use historical weather data from the now-defunct [Dark Sky](https://darksky.net/forecast/33.7546,-84.39/us12/en) about wind speed and temperature trends for downtown Atlanta ([specifically `33.754557, -84.390009`](https://www.google.com/maps/place/33°45'16.4\"N+84°23'24.0\"W/@33.754557,-84.3921977,17z/)) in 2019. I downloaded this data using Dark Sky's (now-retired-because-they-were-bought-by-Apple) API using the [ {darksky} package](https://github.com/hrbrmstr/darksky).\n\nIf you want to follow along with this example, you can download the data below (you'll likely need to right click and choose \"Save Link As…\"):\n\n- [{{< fa file-csv >}} `atl-weather-2019.csv`](/files/data/external_data/atl-weather-2019.csv)\n\n\n\n<div class=\"ratio ratio-16x9\">\n<iframe src=\"https://www.youtube.com/embed/40dW63jTbsk\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen=\"\" frameborder=\"0\"></iframe>\n</div>\n\n\n::: {.callout-important}\n### Slight differences from the video\n\nThis is a slightly cleaned up version of the code from the video.\n:::\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(fig.width = 6, fig.height = 3.6, fig.align = \"center\", collapse = TRUE)\nset.seed(1234)\n```\n\n## Load and clean data\n\nFirst, we load the libraries we'll be using:\n\n```{r load-libraries, message=FALSE, warning=FALSE}\nlibrary(tidyverse)\nlibrary(ggridges)\nlibrary(gghalves)\n```\n\nThen we load the data with `read_csv()`. Here I assume that the CSV file lives in a subfolder in my project named `data`:\n\n```{r load-data-fake, eval=FALSE}\nweather_atl_raw <- read_csv(\"data/atl-weather-2019.csv\")\n```\n\n```{r load-data-real, include=FALSE, message=FALSE}\nweather_atl_raw <- read_csv(here::here(\"files\", \"data\", \"external_data\", \"atl-weather-2019.csv\"))\n```\n\nWe'll add a couple columns that we can use for faceting and filling using the `month()` and `wday()` functions from {lubridate} (which was loaded as part of {tidyverse}) for extracting parts of the date:\n\n```{r clean-data}\nweather_atl <- weather_atl_raw %>% \n  mutate(Month = month(time, label = TRUE, abbr = FALSE),\n         Day = wday(time, label = TRUE, abbr = FALSE))\n```\n\nNow we're ready to go!\n\n## Histograms\n\nWe can first make a histogram of wind speed. We'll use a bin width of 1 and color the edges of the bars white:\n\n```{r basic-histogram}\nggplot(weather_atl, aes(x = windSpeed)) +\n  geom_histogram(binwidth = 1, color = \"white\")\n```\n\nThis is fine enough, but we can improve it by forcing the buckets/bins to start at whole numbers instead of containing ranges like 2.5–3.5. We'll use the `boundary` argument for that. We also add `scale_x_continuous()` to add our own x-axis breaks instead of having things like 2.5, 5, and 7.5:\n\n```{r basic-histogram-better}\nggplot(weather_atl, aes(x = windSpeed)) +\n  geom_histogram(binwidth = 1, color = \"white\", boundary = 1) +\n  scale_x_continuous(breaks = seq(0, 12, by = 1))\n```\n\nWe can show the distribution of wind speed by month if we map the `Month` column we made onto the fill aesthetic:\n\n```{r histogram-by-month}\nggplot(weather_atl, aes(x = windSpeed, fill = Month)) +\n  geom_histogram(binwidth = 1, color = \"white\", boundary = 1) +\n  scale_x_continuous(breaks = seq(0, 12, by = 1))\n```\n\nThis is colorful, but it's impossible to actually interpret. Instead of only filling, we'll also facet by month to see separate graphs for each month. We can turn off the fill legend because it's now redundant.\n\n```{r histogram-by-month-facet, fig.width=8, fig.height=4.8}\nggplot(weather_atl, aes(x = windSpeed, fill = Month)) +\n  geom_histogram(binwidth = 1, color = \"white\", boundary = 1) +\n  scale_x_continuous(breaks = seq(0, 12, by = 1)) + \n  guides(fill = \"none\") +\n  facet_wrap(vars(Month))\n```\n\nNeat! January, March, and April appear to have the most variation in windy days, with a few wind-less days and a few very-windy days, while August was very wind-less.\n\n## Density plots\n\nThe code to create a density plot is nearly identical to what we used for the histogram—the only thing we change is the `geom` layer:\n\n```{r basic-density}\nggplot(weather_atl, aes(x = windSpeed)) +\n  geom_density(color = \"grey20\", fill = \"grey50\")\n```\n\nIf we want, we can mess with some of the calculus options like the kernel and bandwidth:\n\n```{r density-kernel-bw}\nggplot(weather_atl, aes(x = windSpeed)) +\n  geom_density(color = \"grey20\", fill = \"grey50\",\n               bw = 0.1, kernel = \"epanechnikov\")\n```\n\nWe can also fill by month. We'll make the different layers 50% transparent so we can kind of see through the whole stack:\n\n```{r density-fill-by-month}\nggplot(weather_atl, aes(x = windSpeed, fill = Month)) +\n  geom_density(alpha = 0.5)\n```\n\nEven with the transparency, this is really hard to interpret. We can fix this by faceting, like we did with the histograms:\n\n```{r density-facet-by-month, fig.width=8, fig.height=4.8}\nggplot(weather_atl, aes(x = windSpeed, fill = Month)) +\n  geom_density(alpha = 0.5) +\n  guides(fill = \"none\") +\n  facet_wrap(vars(Month))\n```\n\nOr we can stack the density plots behind each other with [{ggridges}](https://cran.r-project.org/web/packages/ggridges/vignettes/introduction.html). For that to work, we also need to map `Month` to the y-axis. We can reverse the y-axis so that January is at the top if we use the `fct_rev()` function:\n\n```{r ggridges-basic, message=FALSE}\nggplot(weather_atl, aes(x = windSpeed, y = fct_rev(Month), fill = Month)) +\n  geom_density_ridges() +\n  guides(fill = \"none\")\n```\n\nWe can add some extra information to `geom_density_ridges()` with some other arguments like `quantile_lines`. We can use the `quantiles` argument to tell the plow how many parts to be cut into. Since we just want to show the median, we'll set that to 2 so each density plot is divided in half:\n\n```{r ggridges-quantile, message=FALSE}\nggplot(weather_atl, aes(x = windSpeed, y = fct_rev(Month), fill = Month)) +\n  geom_density_ridges(quantile_lines = TRUE, quantiles = 2) +\n  guides(fill = \"none\")\n```\n\nNow that we have good working code, we can easily substitute in other variables by changing the x mapping:\n\n```{r ggridges-quantile-temp, message=FALSE}\nggplot(weather_atl, aes(x = temperatureHigh, y = fct_rev(Month), fill = Month)) +\n  geom_density_ridges(quantile_lines = TRUE, quantiles = 2) +\n  guides(fill = \"none\")\n```\n\nWe can get extra fancy if we fill by temperature instead of filling by month. To get this to work, we need to use `geom_density_ridges_gradient()`, and we need to change the `fill` mapping to the strange looking `after_stat(x)`, which is a neat ggplot trick that tells it to use the variable we mapped to the x-axis. For whatever reason, `fill = temperatureHigh` doesn't work `r emoji::emoji(\"shrug\")`:\n\n```{r ggridges-gradient-temp, message=FALSE}\nggplot(weather_atl, aes(x = temperatureHigh, y = fct_rev(Month), fill = after_stat(x))) +\n  geom_density_ridges_gradient(quantile_lines = TRUE, quantiles = 2) +\n  scale_fill_viridis_c(option = \"plasma\") +\n  labs(x = \"High temperature\", y = NULL, color = \"Temp\")\n```\n\nAnd finally, we can get *extra* fancy and show the distributions for both the high and low temperatures each month. To make this work, we need to manipulate the data a little. Right now there are two columns for high and low temperature: `temperatureLow` and `temperatureHigh`. To be able to map temperature to the x-axis and high vs. low to another aesthetic (like `linetype`), we need a column with the temperature and a column with an indicator variable for whether it is high or low. This data needs to be tidied (since right now we have a variable (high/low) encoded in the column name). We can tidy this data using `pivot_longer()` from {tidyr}, which was already loaded with `library(tidyverse)`. In the Posit primers, you did this same thing with `gather()`—`pivot_longer()` is the newer version of `gather()`:\n\n```{r tidy-weather}\nweather_atl_long <- weather_atl %>% \n  pivot_longer(cols = c(temperatureLow, temperatureHigh),\n               names_to = \"temp_type\",\n               values_to = \"temp\") %>% \n  # Clean up the new temp_type column so that \"temperatureHigh\" becomes \"High\", etc.\n  mutate(temp_type = recode(temp_type, \n                            temperatureHigh = \"High\",\n                            temperatureLow = \"Low\")) %>% \n  # This is optional—just select a handful of columns\n  select(time, temp_type, temp, Month) \n\n# Show the first few rows\nhead(weather_atl_long)\n```\n\nNow we have a column for the temperature (`temp`) and a column indicating if it is high or low (`temp_type`). The dataset is also twice as long (730 rows) because each day has two rows (high and low). Let's plot it and map high/low to the `linetype` aesthetic to show high/low in the border of the plots:\n\n```{r ggridges-gradient-temp-high-low, message=FALSE}\nggplot(weather_atl_long, aes(x = temp, y = fct_rev(Month), \n                             fill = after_stat(x), linetype = temp_type)) +\n  geom_density_ridges_gradient(quantile_lines = TRUE, quantiles = 2) +\n  scale_fill_viridis_c(option = \"plasma\") +\n  labs(x = \"High temperature\", y = NULL, color = \"Temp\")\n```\n\nSuper neat! We can see much wider temperature disparities during the summer, with large gaps between high and low, and relatively equal high/low temperatures during the winter.\n\n\n## Box, violin, and rain cloud plots\n\nFinally, we can look at the distribution of variables with box plots, violin plots, and other similar graphs. First, we'll make a box plot of windspeed, filled by the `Day` variable we made indicating weekday:\n\n```{r basic-boxplot}\nggplot(weather_atl,\n       aes(y = windSpeed, fill = Day)) +\n  geom_boxplot()\n```\n\nWe can switch this to a violin plot by just changing the `geom` layer and mapping `Day` to the x-axis:\n\n```{r basic-violin}\nggplot(weather_atl,\n       aes(y = windSpeed, x = Day, fill = Day)) +\n  geom_violin()\n```\n\nWith violin plots it's typically good to overlay other geoms. We can add some jittered points for a strip plot:\n\n```{r violin-strip}\nggplot(weather_atl,\n       aes(y = windSpeed, x = Day, fill = Day)) +\n  geom_violin() +\n  geom_point(size = 0.5, position = position_jitter(width = 0.1)) +\n  guides(fill = \"none\")\n```\n\nWe can also add larger points for the daily averages. We'll use a special layer for this: `stat_summary()`. It has a slightly different syntax, since we're not actually mapping a column from the dataset. Instead, we're feeding a column from a dataset into a function (here `\"mean\"`) and then plotting that result:\n\n```{r violin-strip-mean}\nggplot(weather_atl,\n       aes(y = windSpeed, x = Day, fill = Day)) +\n  geom_violin() +\n  stat_summary(geom = \"point\", fun = \"mean\", size = 5, color = \"white\") +\n  geom_point(size = 0.5, position = position_jitter(width = 0.1)) +\n  guides(fill = \"none\")\n```\n\nWe can also show the mean and confidence interval at the same time by changing the summary function:\n\n```{r violin-strip-mean-ci}\nggplot(weather_atl,\n       aes(y = windSpeed, x = Day, fill = Day)) +\n  geom_violin() +\n  stat_summary(geom = \"pointrange\", fun.data = \"mean_se\", size = 1, color = \"white\") +\n  geom_point(size = 0.5, position = position_jitter(width = 0.1)) +\n  guides(fill = \"none\")\n```\n\nOverlaying the points directly on top of the violins shows extra information, but it's also really crowded and hard to read. If we use [the {gghalves} package](https://github.com/erocoar/gghalves), we can use special halved versions of some of these geoms like so:\n\n```{r gghalves-point-boxplot}\nggplot(weather_atl,\n       aes(x = fct_rev(Day), y = temperatureHigh)) +\n  geom_half_point(aes(color = Day), side = \"l\", size = 0.5) +\n  geom_half_boxplot(aes(fill = Day), side = \"r\") +\n  guides(color = \"none\", fill = \"none\")\n```\n\nNote the `side` argument for specifying which half of the column the geom goes. We can also use `geom_half_violin()`:\n\n```{r gghalves-point-violon}\nggplot(weather_atl,\n       aes(x = fct_rev(Day), y = temperatureHigh)) +\n  geom_half_point(aes(color = Day), side = \"l\", size = 0.5) +\n  geom_half_violin(aes(fill = Day), side = \"r\") +\n  guides(color = \"none\", fill = \"none\")\n```\n\nIf we flip the plot, we can make a [rain cloud plot](https://micahallen.org/2018/03/15/introducing-raincloud-plots/): \n```{r gghalves-rain-cloud, fig.width=8, fig.height=4.8}\nggplot(weather_atl,\n       aes(x = fct_rev(Day), y = temperatureHigh)) +\n  geom_half_boxplot(aes(fill = Day), side = \"l\", width = 0.5, nudge = 0.1) +\n  geom_half_point(aes(color = Day), side = \"l\", size = 0.5) +\n  geom_half_violin(aes(fill = Day), side = \"r\") +\n  guides(color = \"none\", fill = \"none\") + \n  coord_flip()\n```\n\nNeat!\n","srcMarkdownNoYaml":"\n\nFor this example, we're going to use historical weather data from the now-defunct [Dark Sky](https://darksky.net/forecast/33.7546,-84.39/us12/en) about wind speed and temperature trends for downtown Atlanta ([specifically `33.754557, -84.390009`](https://www.google.com/maps/place/33°45'16.4\"N+84°23'24.0\"W/@33.754557,-84.3921977,17z/)) in 2019. I downloaded this data using Dark Sky's (now-retired-because-they-were-bought-by-Apple) API using the [ {darksky} package](https://github.com/hrbrmstr/darksky).\n\nIf you want to follow along with this example, you can download the data below (you'll likely need to right click and choose \"Save Link As…\"):\n\n- [{{< fa file-csv >}} `atl-weather-2019.csv`](/files/data/external_data/atl-weather-2019.csv)\n\n\n## Live coding example\n\n<div class=\"ratio ratio-16x9\">\n<iframe src=\"https://www.youtube.com/embed/40dW63jTbsk\" allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen=\"\" frameborder=\"0\"></iframe>\n</div>\n\n\n::: {.callout-important}\n### Slight differences from the video\n\nThis is a slightly cleaned up version of the code from the video.\n:::\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(fig.width = 6, fig.height = 3.6, fig.align = \"center\", collapse = TRUE)\nset.seed(1234)\n```\n\n## Load and clean data\n\nFirst, we load the libraries we'll be using:\n\n```{r load-libraries, message=FALSE, warning=FALSE}\nlibrary(tidyverse)\nlibrary(ggridges)\nlibrary(gghalves)\n```\n\nThen we load the data with `read_csv()`. Here I assume that the CSV file lives in a subfolder in my project named `data`:\n\n```{r load-data-fake, eval=FALSE}\nweather_atl_raw <- read_csv(\"data/atl-weather-2019.csv\")\n```\n\n```{r load-data-real, include=FALSE, message=FALSE}\nweather_atl_raw <- read_csv(here::here(\"files\", \"data\", \"external_data\", \"atl-weather-2019.csv\"))\n```\n\nWe'll add a couple columns that we can use for faceting and filling using the `month()` and `wday()` functions from {lubridate} (which was loaded as part of {tidyverse}) for extracting parts of the date:\n\n```{r clean-data}\nweather_atl <- weather_atl_raw %>% \n  mutate(Month = month(time, label = TRUE, abbr = FALSE),\n         Day = wday(time, label = TRUE, abbr = FALSE))\n```\n\nNow we're ready to go!\n\n## Histograms\n\nWe can first make a histogram of wind speed. We'll use a bin width of 1 and color the edges of the bars white:\n\n```{r basic-histogram}\nggplot(weather_atl, aes(x = windSpeed)) +\n  geom_histogram(binwidth = 1, color = \"white\")\n```\n\nThis is fine enough, but we can improve it by forcing the buckets/bins to start at whole numbers instead of containing ranges like 2.5–3.5. We'll use the `boundary` argument for that. We also add `scale_x_continuous()` to add our own x-axis breaks instead of having things like 2.5, 5, and 7.5:\n\n```{r basic-histogram-better}\nggplot(weather_atl, aes(x = windSpeed)) +\n  geom_histogram(binwidth = 1, color = \"white\", boundary = 1) +\n  scale_x_continuous(breaks = seq(0, 12, by = 1))\n```\n\nWe can show the distribution of wind speed by month if we map the `Month` column we made onto the fill aesthetic:\n\n```{r histogram-by-month}\nggplot(weather_atl, aes(x = windSpeed, fill = Month)) +\n  geom_histogram(binwidth = 1, color = \"white\", boundary = 1) +\n  scale_x_continuous(breaks = seq(0, 12, by = 1))\n```\n\nThis is colorful, but it's impossible to actually interpret. Instead of only filling, we'll also facet by month to see separate graphs for each month. We can turn off the fill legend because it's now redundant.\n\n```{r histogram-by-month-facet, fig.width=8, fig.height=4.8}\nggplot(weather_atl, aes(x = windSpeed, fill = Month)) +\n  geom_histogram(binwidth = 1, color = \"white\", boundary = 1) +\n  scale_x_continuous(breaks = seq(0, 12, by = 1)) + \n  guides(fill = \"none\") +\n  facet_wrap(vars(Month))\n```\n\nNeat! January, March, and April appear to have the most variation in windy days, with a few wind-less days and a few very-windy days, while August was very wind-less.\n\n## Density plots\n\nThe code to create a density plot is nearly identical to what we used for the histogram—the only thing we change is the `geom` layer:\n\n```{r basic-density}\nggplot(weather_atl, aes(x = windSpeed)) +\n  geom_density(color = \"grey20\", fill = \"grey50\")\n```\n\nIf we want, we can mess with some of the calculus options like the kernel and bandwidth:\n\n```{r density-kernel-bw}\nggplot(weather_atl, aes(x = windSpeed)) +\n  geom_density(color = \"grey20\", fill = \"grey50\",\n               bw = 0.1, kernel = \"epanechnikov\")\n```\n\nWe can also fill by month. We'll make the different layers 50% transparent so we can kind of see through the whole stack:\n\n```{r density-fill-by-month}\nggplot(weather_atl, aes(x = windSpeed, fill = Month)) +\n  geom_density(alpha = 0.5)\n```\n\nEven with the transparency, this is really hard to interpret. We can fix this by faceting, like we did with the histograms:\n\n```{r density-facet-by-month, fig.width=8, fig.height=4.8}\nggplot(weather_atl, aes(x = windSpeed, fill = Month)) +\n  geom_density(alpha = 0.5) +\n  guides(fill = \"none\") +\n  facet_wrap(vars(Month))\n```\n\nOr we can stack the density plots behind each other with [{ggridges}](https://cran.r-project.org/web/packages/ggridges/vignettes/introduction.html). For that to work, we also need to map `Month` to the y-axis. We can reverse the y-axis so that January is at the top if we use the `fct_rev()` function:\n\n```{r ggridges-basic, message=FALSE}\nggplot(weather_atl, aes(x = windSpeed, y = fct_rev(Month), fill = Month)) +\n  geom_density_ridges() +\n  guides(fill = \"none\")\n```\n\nWe can add some extra information to `geom_density_ridges()` with some other arguments like `quantile_lines`. We can use the `quantiles` argument to tell the plow how many parts to be cut into. Since we just want to show the median, we'll set that to 2 so each density plot is divided in half:\n\n```{r ggridges-quantile, message=FALSE}\nggplot(weather_atl, aes(x = windSpeed, y = fct_rev(Month), fill = Month)) +\n  geom_density_ridges(quantile_lines = TRUE, quantiles = 2) +\n  guides(fill = \"none\")\n```\n\nNow that we have good working code, we can easily substitute in other variables by changing the x mapping:\n\n```{r ggridges-quantile-temp, message=FALSE}\nggplot(weather_atl, aes(x = temperatureHigh, y = fct_rev(Month), fill = Month)) +\n  geom_density_ridges(quantile_lines = TRUE, quantiles = 2) +\n  guides(fill = \"none\")\n```\n\nWe can get extra fancy if we fill by temperature instead of filling by month. To get this to work, we need to use `geom_density_ridges_gradient()`, and we need to change the `fill` mapping to the strange looking `after_stat(x)`, which is a neat ggplot trick that tells it to use the variable we mapped to the x-axis. For whatever reason, `fill = temperatureHigh` doesn't work `r emoji::emoji(\"shrug\")`:\n\n```{r ggridges-gradient-temp, message=FALSE}\nggplot(weather_atl, aes(x = temperatureHigh, y = fct_rev(Month), fill = after_stat(x))) +\n  geom_density_ridges_gradient(quantile_lines = TRUE, quantiles = 2) +\n  scale_fill_viridis_c(option = \"plasma\") +\n  labs(x = \"High temperature\", y = NULL, color = \"Temp\")\n```\n\nAnd finally, we can get *extra* fancy and show the distributions for both the high and low temperatures each month. To make this work, we need to manipulate the data a little. Right now there are two columns for high and low temperature: `temperatureLow` and `temperatureHigh`. To be able to map temperature to the x-axis and high vs. low to another aesthetic (like `linetype`), we need a column with the temperature and a column with an indicator variable for whether it is high or low. This data needs to be tidied (since right now we have a variable (high/low) encoded in the column name). We can tidy this data using `pivot_longer()` from {tidyr}, which was already loaded with `library(tidyverse)`. In the Posit primers, you did this same thing with `gather()`—`pivot_longer()` is the newer version of `gather()`:\n\n```{r tidy-weather}\nweather_atl_long <- weather_atl %>% \n  pivot_longer(cols = c(temperatureLow, temperatureHigh),\n               names_to = \"temp_type\",\n               values_to = \"temp\") %>% \n  # Clean up the new temp_type column so that \"temperatureHigh\" becomes \"High\", etc.\n  mutate(temp_type = recode(temp_type, \n                            temperatureHigh = \"High\",\n                            temperatureLow = \"Low\")) %>% \n  # This is optional—just select a handful of columns\n  select(time, temp_type, temp, Month) \n\n# Show the first few rows\nhead(weather_atl_long)\n```\n\nNow we have a column for the temperature (`temp`) and a column indicating if it is high or low (`temp_type`). The dataset is also twice as long (730 rows) because each day has two rows (high and low). Let's plot it and map high/low to the `linetype` aesthetic to show high/low in the border of the plots:\n\n```{r ggridges-gradient-temp-high-low, message=FALSE}\nggplot(weather_atl_long, aes(x = temp, y = fct_rev(Month), \n                             fill = after_stat(x), linetype = temp_type)) +\n  geom_density_ridges_gradient(quantile_lines = TRUE, quantiles = 2) +\n  scale_fill_viridis_c(option = \"plasma\") +\n  labs(x = \"High temperature\", y = NULL, color = \"Temp\")\n```\n\nSuper neat! We can see much wider temperature disparities during the summer, with large gaps between high and low, and relatively equal high/low temperatures during the winter.\n\n\n## Box, violin, and rain cloud plots\n\nFinally, we can look at the distribution of variables with box plots, violin plots, and other similar graphs. First, we'll make a box plot of windspeed, filled by the `Day` variable we made indicating weekday:\n\n```{r basic-boxplot}\nggplot(weather_atl,\n       aes(y = windSpeed, fill = Day)) +\n  geom_boxplot()\n```\n\nWe can switch this to a violin plot by just changing the `geom` layer and mapping `Day` to the x-axis:\n\n```{r basic-violin}\nggplot(weather_atl,\n       aes(y = windSpeed, x = Day, fill = Day)) +\n  geom_violin()\n```\n\nWith violin plots it's typically good to overlay other geoms. We can add some jittered points for a strip plot:\n\n```{r violin-strip}\nggplot(weather_atl,\n       aes(y = windSpeed, x = Day, fill = Day)) +\n  geom_violin() +\n  geom_point(size = 0.5, position = position_jitter(width = 0.1)) +\n  guides(fill = \"none\")\n```\n\nWe can also add larger points for the daily averages. We'll use a special layer for this: `stat_summary()`. It has a slightly different syntax, since we're not actually mapping a column from the dataset. Instead, we're feeding a column from a dataset into a function (here `\"mean\"`) and then plotting that result:\n\n```{r violin-strip-mean}\nggplot(weather_atl,\n       aes(y = windSpeed, x = Day, fill = Day)) +\n  geom_violin() +\n  stat_summary(geom = \"point\", fun = \"mean\", size = 5, color = \"white\") +\n  geom_point(size = 0.5, position = position_jitter(width = 0.1)) +\n  guides(fill = \"none\")\n```\n\nWe can also show the mean and confidence interval at the same time by changing the summary function:\n\n```{r violin-strip-mean-ci}\nggplot(weather_atl,\n       aes(y = windSpeed, x = Day, fill = Day)) +\n  geom_violin() +\n  stat_summary(geom = \"pointrange\", fun.data = \"mean_se\", size = 1, color = \"white\") +\n  geom_point(size = 0.5, position = position_jitter(width = 0.1)) +\n  guides(fill = \"none\")\n```\n\nOverlaying the points directly on top of the violins shows extra information, but it's also really crowded and hard to read. If we use [the {gghalves} package](https://github.com/erocoar/gghalves), we can use special halved versions of some of these geoms like so:\n\n```{r gghalves-point-boxplot}\nggplot(weather_atl,\n       aes(x = fct_rev(Day), y = temperatureHigh)) +\n  geom_half_point(aes(color = Day), side = \"l\", size = 0.5) +\n  geom_half_boxplot(aes(fill = Day), side = \"r\") +\n  guides(color = \"none\", fill = \"none\")\n```\n\nNote the `side` argument for specifying which half of the column the geom goes. We can also use `geom_half_violin()`:\n\n```{r gghalves-point-violon}\nggplot(weather_atl,\n       aes(x = fct_rev(Day), y = temperatureHigh)) +\n  geom_half_point(aes(color = Day), side = \"l\", size = 0.5) +\n  geom_half_violin(aes(fill = Day), side = \"r\") +\n  guides(color = \"none\", fill = \"none\")\n```\n\nIf we flip the plot, we can make a [rain cloud plot](https://micahallen.org/2018/03/15/introducing-raincloud-plots/): \n```{r gghalves-rain-cloud, fig.width=8, fig.height=4.8}\nggplot(weather_atl,\n       aes(x = fct_rev(Day), y = temperatureHigh)) +\n  geom_half_boxplot(aes(fill = Day), side = \"l\", width = 0.5, nudge = 0.1) +\n  geom_half_point(aes(color = Day), side = \"l\", size = 0.5) +\n  geom_half_violin(aes(fill = Day), side = \"r\") +\n  guides(color = \"none\", fill = \"none\") + \n  coord_flip()\n```\n\nNeat!\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":"auto","echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"show","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":true,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"highlight-style":"monokai","toc-depth":4,"filters":["../filters/format_date_end.lua"],"output-file":"06-example.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.450","bibliography":["../files/bib/readings.bib"],"csl":"../files/bib/chicago-author-date.csl","_quarto-vars":{"author":"Andrew Heiss","instructor":{"name":"Dr. Andrew Heiss","name_no_title":"Andrew Heiss","email":"aheiss@gsu.edu","url":"https://www.andrewheiss.com","twitter":"andrewheiss","github":"andrewheiss","office":"55 Park Place SE, Room 464","contact_policy":"E-mail and Slack are the best ways to get in contact with me. I will try to respond to all course-related e-mails and Slack messages within 24 hours (*really*), but also remember that life can be busy and chaotic for everyone (including me!), so if I don't respond right away, don't worry!","appointment_url":"https://calendly.com/andrewheiss/"},"course":{"number":"PMAP 8551/4551","semester":"Fall 2023","days":"Any day","time":"Asynchronous","location":"Anywhere","dates":"August 12–December 11, 2023","github":"https://www.github.com/andrewheiss/datavizf23.classes.andrewheiss.com","url":"https://datavizf23.classes.andrewheiss.com","copyright_year":"2023","slack":"https://gsudatavizf2023.slack.com"},"university":{"name":"Georgia State University","url":"https://www.gsu.edu"},"school":{"name":"Andrew Young School of Policy Studies","url":"https://aysps.gsu.edu/"}},"theme":["litera","../html/custom.scss"],"date-heading":{"content":"Example for","class":"bg-example"},"date-format":"full","template-partials":["../html/title-block.html"],"title":"Uncertainty","date":"2023-09-25","date_end":"2023-09-29"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}