{"title":"Slow down, simplify and do small things","markdown":{"yaml":{"title":"Slow down, simplify and do small things","date":"2023-10-12T16:37","categories":["advice"],"toc-depth":4},"headingText":"1. Strip it down to a basic plot","containsRefs":false,"markdown":"\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(\n  fig.width = 6, \n  fig.height = 6 * 0.618, \n  fig.align = \"center\", \n  out.width = \"90%\",\n  collapse = TRUE\n)\n```\n\nHi everyone!\n\nNow that we're at the middle of the course, your plots and data manipulation are becoming more detailed and complex, which is good! Remember exercise 1, so long ago? All you had to do was this:\n\n```{r basic-example, eval=FALSE}\nlibrary(tidyverse)\n\nggplot(data = mpg, mapping = aes(x = displ, y = hwy, color = drv)) +\n  geom_point()\n```\n\nThat's all! Literally 3 lines of code.\n\nBut now with your mini projects, and (in the future) interactivity, maps, text analysis, and your final project, your code is getting longer and more complex. You'll have lots and lots of ggplot layers and functions chained together with `%>%`. You've learned so much!\n\nIt is *incredibly* tempting to write out all the code you want in one go and then try to run a complete chunk and hope that you got it all correct. And then when it's not correct, you try to change a bunch of things, hoping that they'll fix it and then they don't and you stay stuck and frustrated. You'll have a chunk of code that was 20–30 lines with an error somewhere and won't be able to find what went wrong or what was broken.\n\n**Don't do this!**\n\nHere's my best piece of advice for making more complex plots and for figuring out how to fix errors:\n\n> **Slow down, simplify, and do small things**\n\nRun your code incrementally (see [this past post here](/news/2023-10-12_messy-broken-code-tips.qmd) for some video examples about how to run stuff incrementally.). Start with a super basic plot and run it, then add a layer for labels and run it, then add a layer to change the fill gradient and run it, then add a layer to change the theme and run it, and so on. It feels slow, but it helps you understand what's going on and helps you fix things when they break.\n\nThis is not just my advice. [Julia Evans's](https://jvns.ca/) fantastic [*The Pocket Guide to Debugging*](https://wizardzines.com/zines/debugging-guide/) has the same piece of advice:\n\n![Page 39 from Julia Evans's *The Pocket Guide to Debugging*](img/pocket-debugging.png)\n\nWhen something doesn't work as expected, change just one thing at a time. Or even better, simplify it and then change one thing at a time.\n\nHere's a quick common example. Let's say you have a plot like this and you want to use the [plasma viridis scale](https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html#the-color-scales) for the colors of the points. It looks like it should work, but the colors aren't right! Those are just the default colors!\n\n```{r example-broken, warning=FALSE, message=FALSE}\nlibrary(tidyverse)\n\nggplot(data = mpg, mapping = aes(x = displ, y = hwy, color = drv)) +\n  geom_point() +\n  labs(x = \"Displacement\",\n       y = \"Highway MPG\",\n       color = \"Drive\") +\n  scale_fill_viridis_d(option = \"plasma\", end = 0.9) +\n  theme_minimal() +\n  theme(legend.position = \"bottom\")\n```\n\nHere's the process I would go through to figure out what's wrong and fix it:\n\n::: {.panel-tabset .nav-pills}\n\nRight now there are a bunch of other layers (themes, labels, etc.). Maybe one of those is messing stuff up? We want to make sure the underlying plot works fine, so we'll strip down the plot to its simplest form—just the geoms\n\n```{r step-1, warning=FALSE, message=FALSE}\nggplot(data = mpg, mapping = aes(x = displ, y = hwy, color = drv)) +\n  geom_point()\n```\n\n### 2. Add simplified broken part\n\nGood, that works. Next we want to change the colors so that they use the viridis plasma palette. We used `scale_fill_viridis_d()` originally, but we also included a bunch of extra options (`option = \"plamsa\", end = 0.9`). Before using those, let's simplify it down and just use the default settings:\n\n```{r step-2}\nggplot(data = mpg, mapping = aes(x = displ, y = hwy, color = drv)) +\n  geom_point() +\n  scale_fill_viridis_d()\n```\n\n### 3. Figure out broken part\n\nThe colors still didn't change. But now we have a simplified working example of our broken code and we can examine it without worrying about the labels, themes, extra options, and all those other things. This should make it easier to see what's going on.\n\nThe issue here is that we used the color aesthetic (`color = drv`) and we're trying to change it with `scale_fill_*()`. That lets us control filled things (i.e. `fill = drv`). Since we're working with the color aesthetic, we need to use `scale_color_*()`. Let's try `scale_color_viridis_d()` and see if that fixes it:\n\n```{r step-3}\nggplot(data = mpg, mapping = aes(x = displ, y = hwy, color = drv)) +\n  geom_point() +\n  scale_color_viridis_d()\n```\n\n### 4. Add some parts back in\n\nThat fixed it! It's still not exactly what we wanted yet—we want the plasma palette and `end = 0.9`—but it's working now and we can add that back in: \n\n```{r step-4}\nggplot(data = mpg, mapping = aes(x = displ, y = hwy, color = drv)) +\n  geom_point() +\n  scale_color_viridis_d(option = \"plasma\", end = 0.9)\n```\n\n### 5. Add the rest back in\n\nCool, the palette changed and the other settings worked. The problem seems to be fixed now, so we can re-add all those other layers from the original plot. It's fixed!\n\n```{r step-5}\nggplot(data = mpg, mapping = aes(x = displ, y = hwy, color = drv)) +\n  geom_point() +\n  labs(x = \"Displacement\",\n       y = \"Highway MPG\",\n       color = \"Drive\") +\n  scale_color_viridis_d(option = \"plasma\", end = 0.9) +\n  theme_minimal() +\n  theme(legend.position = \"bottom\")\n```\n\n:::\n","srcMarkdownNoYaml":"\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(\n  fig.width = 6, \n  fig.height = 6 * 0.618, \n  fig.align = \"center\", \n  out.width = \"90%\",\n  collapse = TRUE\n)\n```\n\nHi everyone!\n\nNow that we're at the middle of the course, your plots and data manipulation are becoming more detailed and complex, which is good! Remember exercise 1, so long ago? All you had to do was this:\n\n```{r basic-example, eval=FALSE}\nlibrary(tidyverse)\n\nggplot(data = mpg, mapping = aes(x = displ, y = hwy, color = drv)) +\n  geom_point()\n```\n\nThat's all! Literally 3 lines of code.\n\nBut now with your mini projects, and (in the future) interactivity, maps, text analysis, and your final project, your code is getting longer and more complex. You'll have lots and lots of ggplot layers and functions chained together with `%>%`. You've learned so much!\n\nIt is *incredibly* tempting to write out all the code you want in one go and then try to run a complete chunk and hope that you got it all correct. And then when it's not correct, you try to change a bunch of things, hoping that they'll fix it and then they don't and you stay stuck and frustrated. You'll have a chunk of code that was 20–30 lines with an error somewhere and won't be able to find what went wrong or what was broken.\n\n**Don't do this!**\n\nHere's my best piece of advice for making more complex plots and for figuring out how to fix errors:\n\n> **Slow down, simplify, and do small things**\n\nRun your code incrementally (see [this past post here](/news/2023-10-12_messy-broken-code-tips.qmd) for some video examples about how to run stuff incrementally.). Start with a super basic plot and run it, then add a layer for labels and run it, then add a layer to change the fill gradient and run it, then add a layer to change the theme and run it, and so on. It feels slow, but it helps you understand what's going on and helps you fix things when they break.\n\nThis is not just my advice. [Julia Evans's](https://jvns.ca/) fantastic [*The Pocket Guide to Debugging*](https://wizardzines.com/zines/debugging-guide/) has the same piece of advice:\n\n![Page 39 from Julia Evans's *The Pocket Guide to Debugging*](img/pocket-debugging.png)\n\nWhen something doesn't work as expected, change just one thing at a time. Or even better, simplify it and then change one thing at a time.\n\nHere's a quick common example. Let's say you have a plot like this and you want to use the [plasma viridis scale](https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html#the-color-scales) for the colors of the points. It looks like it should work, but the colors aren't right! Those are just the default colors!\n\n```{r example-broken, warning=FALSE, message=FALSE}\nlibrary(tidyverse)\n\nggplot(data = mpg, mapping = aes(x = displ, y = hwy, color = drv)) +\n  geom_point() +\n  labs(x = \"Displacement\",\n       y = \"Highway MPG\",\n       color = \"Drive\") +\n  scale_fill_viridis_d(option = \"plasma\", end = 0.9) +\n  theme_minimal() +\n  theme(legend.position = \"bottom\")\n```\n\nHere's the process I would go through to figure out what's wrong and fix it:\n\n::: {.panel-tabset .nav-pills}\n### 1. Strip it down to a basic plot\n\nRight now there are a bunch of other layers (themes, labels, etc.). Maybe one of those is messing stuff up? We want to make sure the underlying plot works fine, so we'll strip down the plot to its simplest form—just the geoms\n\n```{r step-1, warning=FALSE, message=FALSE}\nggplot(data = mpg, mapping = aes(x = displ, y = hwy, color = drv)) +\n  geom_point()\n```\n\n### 2. Add simplified broken part\n\nGood, that works. Next we want to change the colors so that they use the viridis plasma palette. We used `scale_fill_viridis_d()` originally, but we also included a bunch of extra options (`option = \"plamsa\", end = 0.9`). Before using those, let's simplify it down and just use the default settings:\n\n```{r step-2}\nggplot(data = mpg, mapping = aes(x = displ, y = hwy, color = drv)) +\n  geom_point() +\n  scale_fill_viridis_d()\n```\n\n### 3. Figure out broken part\n\nThe colors still didn't change. But now we have a simplified working example of our broken code and we can examine it without worrying about the labels, themes, extra options, and all those other things. This should make it easier to see what's going on.\n\nThe issue here is that we used the color aesthetic (`color = drv`) and we're trying to change it with `scale_fill_*()`. That lets us control filled things (i.e. `fill = drv`). Since we're working with the color aesthetic, we need to use `scale_color_*()`. Let's try `scale_color_viridis_d()` and see if that fixes it:\n\n```{r step-3}\nggplot(data = mpg, mapping = aes(x = displ, y = hwy, color = drv)) +\n  geom_point() +\n  scale_color_viridis_d()\n```\n\n### 4. Add some parts back in\n\nThat fixed it! It's still not exactly what we wanted yet—we want the plasma palette and `end = 0.9`—but it's working now and we can add that back in: \n\n```{r step-4}\nggplot(data = mpg, mapping = aes(x = displ, y = hwy, color = drv)) +\n  geom_point() +\n  scale_color_viridis_d(option = \"plasma\", end = 0.9)\n```\n\n### 5. Add the rest back in\n\nCool, the palette changed and the other settings worked. The problem seems to be fixed now, so we can re-add all those other layers from the original plot. It's fixed!\n\n```{r step-5}\nggplot(data = mpg, mapping = aes(x = displ, y = hwy, color = drv)) +\n  geom_point() +\n  labs(x = \"Displacement\",\n       y = \"Highway MPG\",\n       color = \"Drive\") +\n  scale_color_viridis_d(option = \"plasma\", end = 0.9) +\n  theme_minimal() +\n  theme(legend.position = \"bottom\")\n```\n\n:::\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":"auto","echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"highlight-style":"monokai","toc-depth":4,"output-file":"2023-10-12_slow-down-do-small-things.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Posted","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.450","bibliography":["../files/bib/readings.bib"],"csl":"../files/bib/chicago-author-date.csl","_quarto-vars":{"author":"Andrew Heiss","instructor":{"name":"Dr. Andrew Heiss","name_no_title":"Andrew Heiss","email":"aheiss@gsu.edu","url":"https://www.andrewheiss.com","twitter":"andrewheiss","github":"andrewheiss","office":"55 Park Place SE, Room 464","contact_policy":"E-mail and Slack are the best ways to get in contact with me. I will try to respond to all course-related e-mails and Slack messages within 24 hours (*really*), but also remember that life can be busy and chaotic for everyone (including me!), so if I don't respond right away, don't worry!","appointment_url":"https://calendly.com/andrewheiss/"},"course":{"number":"PMAP 8551/4551","semester":"Fall 2023","days":"Any day","time":"Asynchronous","location":"Anywhere","dates":"August 12–December 11, 2023","github":"https://www.github.com/andrewheiss/datavizf23.classes.andrewheiss.com","url":"https://datavizf23.classes.andrewheiss.com","copyright_year":"2023","slack":"https://gsudatavizf2023.slack.com"},"university":{"name":"Georgia State University","url":"https://www.gsu.edu"},"school":{"name":"Andrew Young School of Policy Studies","url":"https://aysps.gsu.edu/"}},"theme":["litera","../html/custom.scss"],"date-format":"dddd MMMM D, YYYY [at] h:mm A","template-partials":["../html/news/title-block.html"],"title":"Slow down, simplify and do small things","date":"2023-10-12T16:37","categories":["advice"]},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}